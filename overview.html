<!doctype html>
<html class="no-js" lang="en" data-content_root="./">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="Get stations" href="notebooks/get_stations.html" /><link rel="prev" title="Installation" href="installation.html" />

    <!-- Generated with Sphinx 7.2.6 and Furo 2024.01.29 -->
        <title>Overview - RAPI documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=135e06be" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=36a5483c" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">RAPI  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="_static/CRo-Czech_Radio-H-RGB.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">RAPI  documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="notebooks/get_stations.html">Get stations</a></li>
<li class="toctree-l1"><a class="reference internal" href="notebooks/get_shows_for_the_given_station.html">Get shows for the given station</a></li>
<li class="toctree-l1"><a class="reference internal" href="notebooks/get_episodes_for_the_given_show.html">Get episodes for the given show</a></li>
<li class="toctree-l1"><a class="reference internal" href="notebooks/get_participants_for_the_given_show.html">Get participants for the given show</a></li>
<li class="toctree-l1"><a class="reference internal" href="notebooks/get_schedules_for_the_given_show.html">Get schedules for the given show</a></li>
<li class="toctree-l1"><a class="reference internal" href="notebooks/explore_data_with_pandas.html">Explore data wih Pandas</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="discusion.html">Discussion</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="reference.html">Package API</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="overview">
<h1>Overview<a class="headerlink" href="#overview" title="Link to this heading">#</a></h1>
<section id="api-urls">
<h2>API URLs<a class="headerlink" href="#api-urls" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://api.mujrozhlas.cz">REST API URL</a></p></li>
<li><p><a class="reference external" href="https://rapidoc.croapp.cz/">REST API Documentation</a></p></li>
<li><p><a class="reference external" href="https://rapidoc.croapp.cz/apifile/openapi.yaml">REST API Swagger Specification</a></p></li>
</ul>
</section>
<section id="domain-model-overview">
<h2>Domain model overview<a class="headerlink" href="#domain-model-overview" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Station</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Show</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Episode</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ScheduleEpisode</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Person</span></code> (participant/moderator)</p></li>
</ul>
<section id="episode-vs-scheduleepisode">
<h3>Episode vs ScheduleEpisode<a class="headerlink" href="#episode-vs-scheduleepisode" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>ScheduleEpisode je programová epizoda, kterou nám dodává systém AIS. Slouží většinou jen k zobrazení v programu, v některých případech k vytváření samotných ‘episode’ epizod (více způsoby). Epizoda typu ‘episode’ je pak základní kámen celého obsahu v rAPI stejně jako webu mujRozhlas. Ta už má přímou a jistou (deterministickou) návaznost na pořady, seriály, případně stanice.</p></li>
<li><p>scheduleEpisode (since/till), to je opravdu čas vysílání (plánovaného vysílání), a opravdu bez rozlišení premiéry/reprízy.</p></li>
<li><p>Můžete to brát tak, že scheduleEpisodes jsou hrubá data, která slouží spíš procesu vytváření obsahu, než že by odpovídala obsahu samotnému.</p></li>
<li><p>Vztah episode a scheduleEpisode je spíš obsahový a nepřímý.</p></li>
<li><p>Vztah scheduleEpisode a show je obsahově takový, že scheduleEpisode vzniká přímo z dat AISu, podle kterých vytváříme poměrně komplikovanou heuristikou show. Důležité je, že i když jsou tyto pořady mezi běžně, editorsky vytvářenými pořady v DB, v pohodě se může stát, že když jsou data z AISu nešikovně poskládaná, pro každou epizodu nějakého seriálu může ad hoc vzniknout pořad, který se použije pouze pro zobrazení v programu. V řadě případů se ale dohromady spárují s existujícím pořadem správně (jako třeba v tom příkladu, co posíláte). Spárování na úrovni programu (schedule) je jen pro optiku, obsahově potřebujeme rozumný titulek do programu a tím to v podstatě hasne. Tam vůbec nezáleží na tom, jestli se scheduleEpisode v DB přiřadí správně k pořadu Zprávy, nebo k pořadu Páteční zprávy 123.</p></li>
<li><p>ScheduleEpisodes a z nich odvozené pořady, shows, jsou víceméně dočasná záležitost. Vůbec to nelze brát ani jako archiv čehokoli, protože za normálního stavu je po půl roce mažeme. Teď toho tam bude víc, protože jsme nechali mazání od letního hacku dočasně vypnuté kvůli rekonstrukci dat.</p></li>
<li><p>Není moc jak zjistit, jestli je to nová věc, nebo věc vydaná znovu po dvou letech na jiné stanici. (Spousta pořadů probíhá samozřejmě na více stanicích a stanice si je navzájem přebírají.)</p></li>
</ul>
</section>
</section>
<section id="endpoints-and-client-methods">
<h2>Endpoints and client methods<a class="headerlink" href="#endpoints-and-client-methods" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/stations</span></code></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">Client.get_stations()</span></code>:  returns all stations</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Client.get_station(&quot;11&quot;)</span></code>: -&gt; returns station with given id</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">/stations/{show_guid}/shows</span></code></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">Client.get_station_shows()</span></code></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">/shows/{show_guid}</span></code>: returns show object</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">Client.get_show()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Client.get_show_participants_with_roles()</span></code>
(calls Client.get_person for each member guid in participants relation table and filters result by role=”moderator”.)
<code class="docutils literal notranslate"><span class="pre">/shows/{show_guid}/participants</span></code>: returns persons (participants/moderators)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Client.get_show_participants()</span></code></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">/shows/{show_guid}/schedule-episodes</span></code></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">Client.get_show_episodes()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Client.show_episodes_filter()</span></code></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">/shows/{show_guid}/schedule-episodes?sort=since</span></code></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">Client.get_show_episodes_schedule</span></code></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">/schedule</span></code>: vrací scheduleEpisodes podle posloupnosti vysílání bez ohledu na to, jestli se jedná o premiéru/reprízu. asi nejstarší s nejširší podporou filtrů, nevýhoda je v tom, že by měl obsahovat celou strukturu včetně zanořených položek (což je pro běžný provoz a filtraci málo praktické), časově se musí filtrovat explicitně (něco jako since/till)</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">Client.get_schedule()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Client.get_schedule_by_date()</span></code></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">/schedule-day</span></code>: vrací scheduleEpisode
program pro den, pokud vím, nepoužívá se podobně jako /schedule, protože obsahuje vnořené položky</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">Client.get_station_schedule_day</span></code></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">/schedule-day-flat</span></code>: vrací scheduleEpisode, program pro den bez vnořených položek (relationship)</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">Client.get_station_schedule_day_flat</span></code></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">/schedule-day-flat-sparse</span></code>: vrací scheduleEpisode, program pro den bez vnořených položek + bez epizod kratších než 4 minuty</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/persons/{person_guid}</span></code></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">Client.get_person()</span></code></p></li>
</ul>
</li>
</ul>
</section>
<section id="pouziti-filtru-pri-primem-volani-api">
<h2>Použití filtrů při přímém volání api<a class="headerlink" href="#pouziti-filtru-pri-primem-volani-api" title="Link to this heading">#</a></h2>
<p><a class="reference external" href="https://api.mujrozhlas.cz/schedule-day-flat-sparse?filter%5Bday%5D=2023-06-21&amp;amp;filter%5Bstations.id%5D=4082f63f-30e8-375d-a326-b32cf7d86e02&amp;amp;filter%5BkeepZV%5D=true">https://api.mujrozhlas.cz/schedule-day-flat-sparse?filter[day]=2023-06-21&amp;filter[stations.id]=4082f63f-30e8-375d-a326-b32cf7d86e02&amp;filter[keepZV]=true</a></p>
<ul class="simple">
<li><p>filter[keepZV]=true slouží pro zahrnutí Zelené vlny, aby se obešlo pravidlo skrytí epizod kratších než 3 minuty)</p></li>
</ul>
</section>
<section id="rest-api-with-curl">
<h2>REST API with CURL<a class="headerlink" href="#rest-api-with-curl" title="Link to this heading">#</a></h2>
<p>Uyou can call REST API with CURL <code class="docutils literal notranslate"><span class="pre">-g/--globoff</span></code> flag e.g.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-g<span class="w"> </span>-X<span class="w"> </span>GET<span class="w"> </span><span class="s2">&quot;https://rapidev.croapp.cz/stations?page[offset]=0&amp;page[limit]=4&quot;</span><span class="w"> </span>-H<span class="w">  </span><span class="s2">&quot;accept: application/vnd.api+json&quot;</span>
</pre></div>
</div>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="notebooks/get_stations.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Get stations</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="installation.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Installation</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2023, Czech Radio
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Overview</a><ul>
<li><a class="reference internal" href="#api-urls">API URLs</a></li>
<li><a class="reference internal" href="#domain-model-overview">Domain model overview</a><ul>
<li><a class="reference internal" href="#episode-vs-scheduleepisode">Episode vs ScheduleEpisode</a></li>
</ul>
</li>
<li><a class="reference internal" href="#endpoints-and-client-methods">Endpoints and client methods</a></li>
<li><a class="reference internal" href="#pouziti-filtru-pri-primem-volani-api">Použití filtrů při přímém volání api</a></li>
<li><a class="reference internal" href="#rest-api-with-curl">REST API with CURL</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="_static/documentation_options.js?v=5929fcd5"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/furo.js?v=32e29ea5"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    </body>
</html>